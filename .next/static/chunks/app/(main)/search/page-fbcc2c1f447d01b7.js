(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{180:(e,t,r)=>{"use strict";r.d(t,{SQ:()=>o,_2:()=>d,mB:()=>c,rI:()=>i,ty:()=>l});var a=r(5177);r(1741);var s=r(4281),n=r(2168);function i(e){return(0,a.jsx)(s.bL,{"data-slot":"dropdown-menu",...e})}function l(e){return(0,a.jsx)(s.l9,{"data-slot":"dropdown-menu-trigger",...e})}function o({className:e,sideOffset:t=4,...r}){return(0,a.jsx)(s.ZL,{children:(0,a.jsx)(s.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,n.cn)("bg-popover text-popover-foreground z-50 min-w-[8rem] rounded-md border p-1 shadow-md overflow-hidden data-[state=open]:animate-in data-[state=closed]:animate-out",e),...r})})}function d({className:e,inset:t,variant:r="default",...i}){return(0,a.jsx)(s.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":r,className:(0,n.cn)("relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm select-none outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...i})}function c({className:e,...t}){return(0,a.jsx)(s.wv,{"data-slot":"dropdown-menu-separator",className:(0,n.cn)("h-px my-1 bg-border",e),...t})}},233:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i});var a=r(5177);r(1741);var s=r(2168);function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function l({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...t})}function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...t})}},1464:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5177),s=r(1941),n=r(1741),i=r(4605),l=r(8898),o=r(6580),d=r(6510),c=r(233),u=r(9873),m=r(180),h=r(3692),x=r(6834);function p(){let[e,t]=(0,n.useState)(""),[r,p]=(0,n.useState)([]),[b,f]=(0,n.useState)(!1),[g,v]=(0,n.useState)([]),{setSong:N}=(0,u.F)(),j=(0,x.useRouter)();(0,n.useEffect)(()=>{let t=setTimeout(async()=>{if(!e.trim())return void p([]);f(!0);try{let{data:{user:t}}=await s.N.auth.getUser(),r=s.N.from("songs").select("*").ilike("title",`%${e}%`);r=t?r.or(`is_published.eq.true,artist_id.eq.${t.id}`):r.eq("is_published",!0);let{data:a,error:n}=await r;n?h.o.error("Fehler beim Laden der Songs"):p(a||[])}catch(e){console.error(e),h.o.error("Fehler beim Laden der Songs")}finally{f(!1)}},400);return()=>clearTimeout(t)},[e]),(0,n.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await s.N.auth.getUser();if(!e)return;let{data:t}=await s.N.from("playlists").select("*").eq("user_id",e.id);v(t||[])}catch(e){console.error("Fehler beim Laden der Playlists:",e)}})()},[]);let y=async e=>{let{data:{user:t}}=await s.N.auth.getUser();if(!t)return h.o.error("Bitte einloggen!");let{error:r}=await s.N.from("library").upsert({user_id:t.id,song_id:e.id});r?h.o.error("Fehler beim Hinzuf\xfcgen zur Library"):h.o.success("Song zur Library hinzugef\xfcgt \uD83C\uDFA7")},w=async(e,t)=>{let{error:r}=await s.N.from("playlist_songs").upsert({playlist_id:t,song_id:e.id});r?h.o.error("Fehler beim Hinzuf\xfcgen zur Playlist"):h.o.success("Song zur Playlist hinzugef\xfcgt")},_=()=>j.push("/library/create");return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-neutral-900 to-black p-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-6",children:"Search"}),(0,a.jsxs)("div",{className:"relative max-w-md",children:[(0,a.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),(0,a.jsx)(i.p,{type:"text",placeholder:"Was m\xf6chtest du h\xf6ren?",value:e,onChange:e=>t(e.target.value),className:"pl-10 bg-neutral-800 border-none text-white placeholder:text-neutral-400 h-12"})]}),(0,a.jsx)("div",{className:"mt-8 space-y-4",children:b?(0,a.jsx)("p",{className:"text-neutral-400",children:"Lade Songs..."}):r.length>0?r.map(e=>(0,a.jsx)(c.Zp,{className:"bg-neutral-900/40 border-neutral-800 hover:bg-neutral-800 transition",children:(0,a.jsxs)(c.Wu,{className:"p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-neutral-400 text-sm",children:e.is_published?"Ver\xf6ffentlicht":"Unver\xf6ffentlicht"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>N({...e,audio_url:e.audio_url??""}),className:"p-2 rounded-full bg-green-600 hover:bg-green-500 transition",children:(0,a.jsx)(o.A,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)(m.rI,{children:[(0,a.jsx)(m.ty,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition",children:(0,a.jsx)(d.A,{className:"w-5 h-5 text-white"})})}),(0,a.jsxs)(m.SQ,{className:"bg-neutral-800 border border-neutral-700 text-white w-52",children:[(0,a.jsx)(m._2,{className:"hover:bg-neutral-700 cursor-pointer",onClick:()=>y(e),children:"Add to Library"}),(0,a.jsx)(m.mB,{}),(0,a.jsx)(m._2,{className:"hover:bg-neutral-700 cursor-pointer",onClick:_,children:"Create Playlist"}),(0,a.jsx)(m.mB,{}),g.length>0?g.map(t=>(0,a.jsx)(m._2,{className:"hover:bg-neutral-700 cursor-pointer",onClick:()=>w(e,t.id),children:t.name},t.id)):(0,a.jsx)(m._2,{disabled:!0,children:"No playlists yet"})]})]})]})]})},e.id)):e?(0,a.jsx)("p",{className:"text-neutral-400",children:"Keine Songs gefunden."}):(0,a.jsx)("p",{className:"text-neutral-400",children:"Suche nach Songs, K\xfcnstlern oder Alben"})})]})}},1941:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(6218).UU)("https://oxuyvirkbpvtvgbbmkmh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94dXl2aXJrYnB2dHZnYmJta21oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MTYyMTUsImV4cCI6MjA3NzQ5MjIxNX0.ii3Ao4_0qrANSNHasZfCs23_5zv6ifxAjqRIZigw14E")},2168:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(1223),s=r(5382);function n(...e){return(0,s.QP)((0,a.$)(e))}},4605:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(5177);r(1741);var s=r(2168);function n({className:e,type:t,...r}){return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},8035:(e,t,r)=>{Promise.resolve().then(r.bind(r,1464))},8898:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(8099).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9873:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});let a=(0,r(1059).v)(e=>({currentSong:void 0,setSong:t=>e({currentSong:t})}))}},e=>{e.O(0,[218,311,921,447,421,745,562,358],()=>e(e.s=8035)),_N_E=e.O()}]);