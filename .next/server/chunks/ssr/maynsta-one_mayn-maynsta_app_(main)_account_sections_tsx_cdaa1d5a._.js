module.exports=[98301,a=>{"use strict";var b=a.i(92881),c=a.i(78821),d=a.i(41268),e=a.i(25948);function f({user:a,profile:f}){let[g,h]=(0,c.useState)(f?.full_name||""),[i,j]=(0,c.useState)(f?.avatar_url||""),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),o=async b=>{let c=b.target.files?.[0];if(c)try{let b=c.name.replace(/[^a-zA-Z0-9._-]/g,"_"),d=`avatars/${a.id}/${b}`,{error:e}=await supabase.storage.from("avatars").upload(d,c,{upsert:!0});if(e){n("Fehler beim Hochladen des Profilbildes"),console.error("Supabase Upload Error:",e);return}let{data:f}=supabase.storage.from("avatars").getPublicUrl(d);j(f.publicUrl),n("Profilbild erfolgreich hochgeladen!")}catch(a){n("Fehler beim Hochladen des Profilbildes"),console.error("Upload Exception:",a)}},p=async()=>{l(!0);try{let{data:b,error:c}=await supabase.from("profiles").upsert({id:a.id,full_name:g,avatar_url:i},{onConflict:"id"});c?(n("Fehler beim Speichern"),console.error("Supabase Save Error:",c),console.log("Supabase Save Response:",b)):n("Profil gespeichert!")}catch(a){n("Fehler beim Speichern"),console.error("Save Exception:",a)}finally{l(!1)}};return(0,b.jsxs)("div",{className:"bg-neutral-800 rounded-xl p-6 space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Profil"}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[i?(0,b.jsx)("img",{src:i,alt:"Avatar",className:"w-20 h-20 rounded-full object-cover"}):(0,b.jsx)("div",{className:"w-20 h-20 rounded-full bg-neutral-700"}),(0,b.jsx)("div",{children:(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:o})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-white text-sm",children:"Name"}),(0,b.jsx)(e.Input,{value:g,onChange:a=>h(a.target.value),className:"mt-1 bg-neutral-900 text-white border-neutral-700"})]}),(0,b.jsx)(d.Button,{onClick:p,disabled:k,children:k?"Speichern...":"Speichern"}),m&&(0,b.jsx)("p",{className:"text-sm text-neutral-400 mt-2",children:m})]})}var g=a.i(73695),h=a.i(97998),i=a.i(90353),j=a.i(81701),k=a.i(2862),l=a.i(34668),m=a.i(86483),n=a.i(96834),o="Switch",[p,q]=(0,k.createContextScope)(o),[r,s]=p(o),t=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:h,required:k,disabled:m,value:p="on",onCheckedChange:q,form:s,...t}=a,[u,v]=c.useState(null),y=(0,j.useComposedRefs)(d,a=>v(a)),z=c.useRef(!1),A=!u||s||!!u.closest("form"),[B,C]=(0,l.useControllableState)({prop:g,defaultProp:h??!1,onChange:q,caller:o});return(0,b.jsxs)(r,{scope:e,checked:B,disabled:m,children:[(0,b.jsx)(n.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":k,"data-state":x(B),"data-disabled":m?"":void 0,disabled:m,value:p,...t,ref:y,onClick:(0,i.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(w,{control:u,bubbles:!z.current,name:f,value:p,checked:B,required:k,disabled:m,form:s,style:{transform:"translateX(-100%)"}})]})});t.displayName=o;var u="SwitchThumb",v=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=s(u,d);return(0,b.jsx)(n.Primitive.span,{"data-state":x(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});v.displayName=u;var w=c.forwardRef(({__scopeSwitch:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let i,k=c.useRef(null),l=(0,j.useComposedRefs)(k,h),n=(i=c.useRef({value:e,previous:e}),c.useMemo(()=>(i.current.value!==e&&(i.current.previous=i.current.value,i.current.value=e),i.current.previous),[e])),o=(0,m.useSize)(d);return c.useEffect(()=>{let a=k.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[n,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:l,style:{...g.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function x(a){return a?"checked":"unchecked"}w.displayName="SwitchBubbleInput";var y=a.i(84995);function z({className:a,...c}){return(0,b.jsx)(t,{"data-slot":"switch",className:(0,y.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(v,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}var A=a.i(20077);function B({userId:a,parentalControls:f}){let[i,j]=(0,c.useState)(f?.pin_code||""),[k,l]=(0,c.useState)(f?.block_videos||!1),[m,n]=(0,c.useState)(f?.block_explicit||!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),s=(0,A.useRouter)(),t=async b=>{if(b.preventDefault(),p(!0),r(null),i&&4!==i.length){r({type:"error",text:"PIN muss 4 Ziffern haben"}),p(!1);return}try{let{error:b}=await supabase.from("parental_controls").upsert({user_id:a,pin_code:i,block_videos:k,block_explicit:m,updated_at:new Date().toISOString()});if(b)throw b;r({type:"success",text:"Jugendschutz erfolgreich aktualisiert"}),s.refresh()}catch(a){r({type:"error",text:a instanceof Error?a.message:"Fehler beim Aktualisieren"})}finally{p(!1)}};return(0,b.jsxs)(h.Card,{className:"bg-neutral-900/40 border-neutral-800",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-white",children:"Jugendschutz"}),(0,b.jsx)(h.CardDescription,{className:"text-neutral-400",children:"Richte einen PIN-Code ein und verwalte Inhaltseinschränkungen"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("form",{onSubmit:t,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"pinCode",className:"text-white",children:"PIN-Code (4 Ziffern)"}),(0,b.jsx)(e.Input,{id:"pinCode",type:"password",maxLength:4,value:i,onChange:a=>j(a.target.value.replace(/\D/g,"")),className:"bg-neutral-800 text-white",placeholder:"1234"}),(0,b.jsx)("p",{className:"text-xs text-neutral-400",children:"Dieser PIN wird benötigt, um Einstellungen zu ändern"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(g.Label,{htmlFor:"blockVideos",className:"text-white",children:"Videos blockieren"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Verhindert das Abspielen von Videoinhalten"})]}),(0,b.jsx)(z,{id:"blockVideos",checked:k,onCheckedChange:l})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(g.Label,{htmlFor:"blockExplicit",className:"text-white",children:"Explizite Inhalte blockieren"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Filtert Songs mit expliziten Inhalten"})]}),(0,b.jsx)(z,{id:"blockExplicit",checked:m,onCheckedChange:n})]})]}),q&&(0,b.jsx)("p",{className:`text-sm ${"success"===q.type?"text-primary":"text-destructive"}`,children:q.text}),(0,b.jsx)(d.Button,{type:"submit",disabled:o,children:o?"Wird gespeichert...":"Speichern"})]})})]})}var C=a.i(69806);let D=(0,C.default)("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);var E=a.i(96404);function F({hasArtistAccount:a}){return(0,b.jsxs)(h.Card,{className:"bg-neutral-900/40 border-neutral-800",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{className:"text-white",children:"Künstlerkonto"}),(0,b.jsx)(h.CardDescription,{className:"text-neutral-400",children:a?"Verwalte dein Künstlerkonto und veröffentliche Musik":"Erstelle ein Künstlerkonto, um deine eigene Musik zu veröffentlichen"})]}),(0,b.jsx)(h.CardContent,{children:a?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-neutral-800 rounded-lg",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center",children:(0,b.jsx)(D,{className:"w-6 h-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-medium",children:"Künstlerkonto aktiv"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Du kannst jetzt Musik veröffentlichen"})]})]}),(0,b.jsx)(E.default,{href:"/artist",children:(0,b.jsx)(d.Button,{className:"w-full",children:"Zum Künstler-Dashboard"})})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-neutral-800 rounded-lg",children:[(0,b.jsx)(D,{className:"w-12 h-12 text-neutral-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-medium",children:"Kein Künstlerkonto"}),(0,b.jsx)("p",{className:"text-sm text-neutral-400",children:"Erstelle ein Konto, um loszulegen"})]})]}),(0,b.jsx)(E.default,{href:"/artist/create",children:(0,b.jsx)(d.Button,{className:"w-full",children:"Künstlerkonto erstellen"})})]})})]})}let G=(0,C.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),H=(0,C.default)("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),I=(0,C.default)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);function J({user:a,profile:e,parentalControls:g,hasArtistAccount:h}){let[i,j]=(0,c.useState)("settings");return(0,b.jsxs)("div",{className:"max-w-4xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,b.jsx)(d.Button,{variant:"settings"===i?"default":"secondary",onClick:()=>j("settings"),className:"flex items-center gap-2",children:(0,b.jsx)(G,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"jugendschutz"===i?"default":"secondary",onClick:()=>j("jugendschutz"),className:"flex items-center gap-2",children:(0,b.jsx)(H,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"artist"===i?"default":"secondary",onClick:()=>j("artist"),className:"flex items-center gap-2",children:(0,b.jsx)(I,{className:"h-4 w-4"})})]}),"settings"===i&&(0,b.jsx)(f,{user:a,profile:e}),"jugendschutz"===i&&(0,b.jsx)(B,{userId:a.id,parentalControls:g}),"artist"===i&&(0,b.jsx)(F,{hasArtistAccount:h})]})}a.s(["default",()=>J],98301)}];

//# sourceMappingURL=maynsta-one_mayn-maynsta_app_%28main%29_account_sections_tsx_cdaa1d5a._.js.map